---
layout: post
title: "iOSå¼€å‘å¦‚ä½•å®ç°é•¿å¾®åšçš„åŠŸèƒ½"
description: "Bison"
category: 
headline: Discover the theme elements
tags: [iOSå›¾ç‰‡å¤„ç†ï¼ŒiOSé•¿åšå®¢ï¼ŒiOSå¼€å‘ï¼ŒiOSå¼€å‘æŠ€å·§ï¼ŒæŠ€æœ¯åšå®¢]
imagefeature: picture-35.jpg
comments: true
featured: true
mathjax: true
path: /images
---

>&quot;iOSå¼€å‘å°±åƒæ¬è¿å·¥ï¼Œå½“æ¬åˆ°ä¸€å®šå¢ƒç•Œçš„æ—¶å€™å°±å¯ä»¥å·æ‡’äº†&quot;
><small><cite title="Plato">Bison</cite></small>

>![1]({{ page.path }}/zjs.jpg)<br>
>[å†°ä¹‹ä¾éŸ©ç‰ˆå¥³è£…](http://allluckly.taobao.com/)ï¼ˆç¨‹åºåª›ç¦åˆ©ï¼‰

åœ¨iOSå¼€å‘ä¸­æˆ‘ä»¬è¯¥å¦‚ä½•å»å®ç°é•¿å¾®åšçš„åŠŸèƒ½å‘¢ï¼Ÿ<br>
è¯´ç™½äº†å°±æ˜¯å°†æ–‡å­—ä¹Ÿè½¬æˆå›¾ç‰‡çš„å½¢å¼æ¥æ˜¾ç¤º<br>
ä¸‹é¢è¯·çœ‹ä»£ç <br>

 > [æ›´å¤šç»éªŒè¯·ç‚¹å‡»](http://www.allluckly.cn/) 


{% highlight css %}

#define CONTENT_MAX_WIDTH   300.0f

+(UIImage *)imageFromText:(NSArray*)arrContent withFont:(CGFloat)fontSize withTextColor:(UIColor *)textColor withBgImage:(UIImage *)bgImage withBgColor:(UIColor *)bgColor
{
// è®¾ç½®å­—ä½“ç±»å‹å’Œå¤§å°

    UIFont *font = [UIFont fontWithName:@"Heiti SC" size:fontSize];
    NSMutableArray *arrHeight = [[NSMutableArray alloc] initWithCapacity:arrContent.count];

    CGFloat fHeight = 0.0f;
    for (NSString *sContent in arrContent) {
        CGSize stringSize = [sContent sizeWithFont:font constrainedToSize:CGSizeMake(CONTENT_MAX_WIDTH, 10000) lineBreakMode:NSLineBreakByWordWrapping];
        [arrHeight addObject:[NSNumber numberWithFloat:stringSize.height]];

        fHeight += stringSize.height;
    }

    CGSize newSize = CGSizeMake(CONTENT_MAX_WIDTH+20, fHeight+50);


    // åˆ›å»ºä¸€ä¸ªå¯æ‹‰ä¼¸çš„å›¾åƒçš„èƒŒæ™¯ä¸Šç”»
    UIGraphicsBeginImageContextWithOptions(newSize,NO,0.0);
    CGContextRef ctx = UIGraphicsGetCurrentContext();


    //å¦‚æœè®¾ç½®äº†èƒŒæ™¯å›¾ç‰‡
    if(bgImage){
        UIImage* stretchedTopImage = [bgImage stretchableImageWithLeftCapWidth:0 topCapHeight:0];
        [stretchedTopImage drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];
    }else{
        if(bgColor){
            //å¡«å……èƒŒæ™¯é¢œè‰²
            [bgColor set];
            UIRectFill(CGRectMake(0, 0, newSize.width, newSize.height));
        }
    }

        CGContextSetCharacterSpacing(ctx, 10);
        CGContextSetTextDrawingMode (ctx, kCGTextFill);
        [textColor set];


        int nIndex = 0;
        CGFloat fPosY = 20.0f;
        for (NSString *sContent in arrContent) {
        NSNumber *numHeight = [arrHeight objectAtIndex:nIndex];
        CGRect rect = CGRectMake(10, fPosY, CONTENT_MAX_WIDTH , [numHeight floatValue]);


        [sContent drawInRect:rect withFont:font lineBreakMode:NSLineBreakByWordWrapping alignment:NSTextAlignmentLeft];

        fPosY += [numHeight floatValue];
        nIndex++;
    }

    // ä¼ é€’å›¾åƒ
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return image;

}
{% endhighlight %}
<br>
> [åšä¸»appä¸Šçº¿äº†ï¼Œèµ¶ç´§ç‚¹æ­¤æ¥å›´è§‚å§ğŸ˜„](https://itunes.apple.com/us/app/it-blog-zi-xueios-kai-fa-jin/id1067787090?l=zh&ls=1&mt=8)<br>
