---
layout: post
title: "UIWebViewçš„ä½¿ç”¨ä¸æ€»ç»“"
description: "Bison"
category: 
headline: Discover the theme elements
tags: [iOSå¼€å‘,UIWebViewï¼ŒæŠ€æœ¯åšå®¢ï¼ŒiOSå¼€å‘æŠ€å·§ï¼ŒiOSå¼€å‘æ€»ç»“]
imagefeature: picture-35.jpg
comments: true
featured: 
mathjax: true
path: /images
---

>&quot;iOSå¼€å‘å°±åƒæ¬è¿å·¥ï¼Œå½“æ¬åˆ°ä¸€å®šå¢ƒç•Œçš„æ—¶å€™å°±å¯ä»¥å·æ‡’äº†&quot;
><small><cite title="Plato">Bison</cite></small>

>![1]({{ page.path }}/zjs.jpg)<br>
>[å†°ä¹‹ä¾éŸ©ç‰ˆå¥³è£…](http://allluckly.taobao.com/)ï¼ˆç¨‹åºåª›ç¦åˆ©ï¼‰

å…ˆå‰åœ¨é¡¹ç›®ä¸­ä½¿ç”¨äº†UIWebView<br>
åœ¨é¡¹ç›®ä¸­ä¸€äº›æ¯”è¾ƒå¤æ‚çš„UIå¸ƒå±€ã€éœ€åå°çµæ´»æ§åˆ¶çš„ç•Œé¢ã€åŸç½‘é¡µï¼Œå¯ä»¥è€ƒè™‘UIWebView<br>
åœ¨ç”¨å®ƒä¹‹å‰è·Ÿå¤§å®¶è¯´ä¸‹å®ƒçš„ä¼˜ç¼ºç‚¹<br>
ä¼˜ç‚¹:<br>
- å¯è·¨å¹³å°<br>
    å¼€å‘ä¸€æ¬¡å¯ä»¥éƒ¨ç½²iOSã€Androidç­‰å¹³å°ã€‚<br>
- å‘å¸ƒæ›´æ–°å¿«<br>
    åœ¨æœåŠ¡å™¨ç«¯å‘å¸ƒï¼Œèƒ½å¤Ÿå®æ—¶æ›´æ–°ç»ˆç«¯å±•ç¤ºï¼Œä¾¿äºå¿«é€Ÿå‡çº§ä»¥åŠç´§æ€¥ä¿®å¤bugã€‚<br>
- æ’ç‰ˆå¸ƒå±€èƒ½åŠ›å¼º<br>
    å¼ºå¤§çš„HTML+CSSè®©äººè†œæ‹œ<br>
ç¼ºç‚¹:<br>
- æ€§èƒ½<br>
    ç›¸å¯¹äºåŸç”Ÿçš„appæ¥è¯´ï¼Œä½¿ç”¨UIWebViewçš„appç›¸å¯¹æ¥è¯´æ€§èƒ½ä¼šä½ä¸€ç‚¹ï¼Œ<br>
    ç”¨æˆ·çš„ä½“éªŒåº¦ä¹Ÿä¼šå¤§æ‰“æŠ˜æ‰£<br>
- æ•°æ®é€šè®¯å¤æ‚
    UIWebViewä¸Appä¹‹é—´è¿›è¡Œæ•°æ®é€šè®¯åªèƒ½é€šè¿‡javascriptæˆ–<br>
    UIWebViewDelegateæ¥è¿›è¡Œï¼Œå®¢æˆ·ç«¯æƒ³ä¼ å‚æ•°ç»™UIWebViewä¿®æ”¹ç½‘é¡µæˆ–<br>
    è€…ä»ç½‘é¡µä¸­è·å–æ•°æ®éƒ½æ¯”è¾ƒå¤æ‚ã€‚

å…·ä½“çš„æ“ä½œå¦‚ä¸‹<br>

 > [æ›´å¤šç»éªŒè¯·ç‚¹å‡»](http://www.allluckly.cn/) 

UIWebViewçš„å¸¸è§„ä½¿ç”¨æ–¹æ³•ï¼š<br>
{% highlight css %}

//åŠ è½½ç½‘é¡µæˆ–è€…æœ¬åœ°æ–‡ä»¶
- (void)loadRequest:(NSURLRequest *)request;

//ç›´æ¥åŠ è½½htmlå†…å®¹ï¼Œå¦‚æœhtmlä¸­çš„å›¾ç‰‡ç­‰èµ„æºåœ¨æœ¬åœ°ç›®å½•ï¼Œæ³¨æ„å°†baseURLæŒ‡å‘è¯¥ç›®å½•
- (void)loadHTMLString:(NSString *)string baseURL:(NSURL *)baseURL;

//åŠŸèƒ½ä¸ä¸Šé¢ç±»ä¼¼
- (void)loadData:(NSData *)data MIMEType:(NSString *)MIMEType textEncodingName:(NSString *)textEncodingName baseURL:(NSURL *)baseURL;

å®ç°UIWebViewDelegate

ä¸»è¦ä½¿ç”¨åˆ°çš„æ–¹æ³•
-(BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*) reuqest navigationType:(UIWebViewNavigationType)navigationType;//å½“ç½‘é¡µè§†å›¾è¢«æŒ‡ç¤ºè½½å…¥å†…å®¹è€Œå¾—åˆ°é€šçŸ¥ã€‚åº”å½“è¿”å›YESï¼Œè¿™æ ·ä¼šè¿›è¡ŒåŠ è½½ã€‚é€šè¿‡å¯¼èˆªç±»å‹å‚æ•°å¯ä»¥å¾—åˆ°è¯·æ±‚å‘èµ·çš„åŸå› ï¼Œå¯ä»¥æ˜¯ä»¥ä¸‹ä»»æ„å€¼ï¼š  
    UIWebViewNavigationTypeLinkClicked //åˆ¤æ–­æ˜¯å¦æ˜¯ç‚¹å‡»äº‹ä»¶ 
    UIWebViewNavigationTypeFormSubmitted  
    UIWebViewNavigationTypeBackForward  
    UIWebViewNavigationTypeReload  
    UIWebViewNavigationTypeFormResubmitted  
    UIWebViewNavigationTypeOther 
é€šè¿‡
    NSURL *url = [request URL];
    NSString *curUrl= [url absoluteString];
å¯å¾—åˆ°ç‚¹å‡»äº‹ä»¶çš„URL

-(void)webViewDidStartLoad:(UIWebView*)webView ;//å½“ç½‘é¡µè§†å›¾å·²ç»å¼€å§‹åŠ è½½ä¸€ä¸ªè¯·æ±‚åï¼Œå¾—åˆ°é€šçŸ¥ã€‚ 
-(void)webViewDidFinishLoad:(UIWebView*)webView ;//å½“ç½‘é¡µè§†å›¾ç»“æŸåŠ è½½ä¸€ä¸ªè¯·æ±‚ä¹‹åï¼Œå¾—åˆ°é€šçŸ¥ã€‚ 
-(void)webView:(UIWebView*)webView  DidFailLoadWithError:(NSError*)error;//å½“åœ¨è¯·æ±‚åŠ è½½ä¸­å‘ç”Ÿé”™è¯¯æ—¶ï¼Œå¾—åˆ°é€šçŸ¥ã€‚ä¼šæä¾›ä¸€ä¸ªNSSErrorå¯¹è±¡ï¼Œä»¥æ ‡è¯†æ‰€å‘ç”Ÿé”™è¯¯ç±»å‹ã€‚  

{% endhighlight %}

è®¾ç½®èƒŒæ™¯é€æ˜ï¼š`webView.backgroundColor= [UIColor clearColor];webView.opaque=NO;`<br>
è‡ªåŠ¨é€‚é…å±å¹•ï¼š`webView.scalespageToFit = YES;`<br>
è‡ªåŠ¨æ£€æµ‹ç½‘é¡µä¸Šçš„ç”µè¯å·ç ï¼Œç‚¹å‡»å¯æ‹¨å·ï¼š<br>
`webView.detectsPhoneNumbers = YES;`<br>
ä¸jsäº¤äº’<br>
{% highlight css %}
æˆ‘ä»¬åœ¨webViewDidFinishLoadæ–¹æ³•ä¸­å°±å¯ä»¥é€šè¿‡javascriptæ“ä½œç•Œé¢å…ƒç´ äº†ã€‚
1ã€è·å–å½“å‰é¡µé¢çš„urlã€‚

- (void)webViewDidFinishLoad:(UIWebView *)webView {
NSString *currentURL = [webView stringByEvaluatingJavaScriptFromString:@"document.location.href"];
}

2ã€è·å–é¡µé¢titleï¼š

- (void)webViewDidFinishLoad:(UIWebView *)webView {
NSString *currentURL = [webView stringByEvaluatingJavaScriptFromString:@"document.location.href"];

NSString *title = [webview stringByEvaluatingJavaScriptFromString:@"document.title"];
}
{% endhighlight %}
<br>
> [åšä¸»appä¸Šçº¿äº†ï¼Œèµ¶ç´§ç‚¹æ­¤æ¥å›´è§‚å§ğŸ˜„](https://itunes.apple.com/us/app/it-blog-zi-xueios-kai-fa-jin/id1067787090?l=zh&ls=1&mt=8)<br>
